{"version":3,"sources":["webpack:///./src/views/admin/stream_upload_video.vue?341b","webpack:///./node_modules/core-js/internals/string-repeat.js","webpack:///./node_modules/core-js/internals/this-number-value.js","webpack:///./src/views/admin/upload_video.vue?5b24","webpack:///src/views/admin/upload_video.vue","webpack:///./src/views/admin/upload_video.vue?c1bd","webpack:///./src/views/admin/upload_video.vue","webpack:///./src/views/admin/upload_video.vue?3077","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/core-js/modules/es.number.to-fixed.js","webpack:///./src/views/admin/stream_upload_video.vue?13f8","webpack:///src/views/admin/stream_upload_video.vue","webpack:///./src/views/admin/stream_upload_video.vue?23be","webpack:///./src/views/admin/stream_upload_video.vue"],"names":["toInteger","requireObjectCoercible","module","exports","repeat","count","str","String","this","result","n","Infinity","RangeError","classof","value","TypeError","render","_vm","_h","$createElement","_c","_self","staticClass","edit","_v","_e","directives","name","rawName","lessonData","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","$set","multiple","getSections","attrs","_l","section","key","_id","domProps","number","_s","modifiers","composing","_n","$forceUpdate","ref","staticStyle","getFile","$refs","file","click","includes","downloadFile","id","download","filesName","method","handleVideoFileUpload","videoType","url","video","loading","progress","ytUrl","style","width","uploadVideo","$router","push","staticRenderFns","components","Loading","StreamUploadVideo","created","params","localStorage","getItem","data","stage","explain","paid","showDate","sections","computed","formData","append","Date","fileName","watch","slashes","length","methods","type","alert","size","set","videoFile","window","open","fileUrl","component","_defineProperty","obj","Object","defineProperty","enumerable","configurable","writable","$","thisNumberValue","fails","nativeToFixed","toFixed","floor","Math","pow","x","acc","log","x2","multiply","c","index","c2","divide","dataToString","s","t","FORCED","proto","forced","fractionDigits","e","z","j","k","fractDigits","sign","slice","getVideo","percentage","uploadBtnEnabled","upload","resumeBtnEnabled","pauseBtnEnabled","resumePause","cancelBtnEnabled","reset","props","chunks","uploaded","startUpdate","resume","filters"],"mappings":"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","file":"js/chunk-1dab0d62.30569bdd.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stream_upload_video.vue?vue&type=style&index=0&id=57da223a&lang=scss&scoped=true&\"","'use strict';\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.repeat` method implementation\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\nmodule.exports = ''.repeat || function repeat(count) {\n  var str = String(requireObjectCoercible(this));\n  var result = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","var classof = require('../internals/classof-raw');\n\n// `thisNumberValue` abstract operation\n// https://tc39.es/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  if (typeof value != 'number' && classof(value) != 'Number') {\n    throw TypeError('Incorrect invocation');\n  }\n  return +value;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cont py-5\"},[_c('div',{staticClass:\"video-upload\"},[(_vm.edit === true)?_c('div',{staticClass:\"text-center title\"},[_vm._v(\"تعديل معلومات الدرس\")]):_vm._e(),(_vm.edit === false)?_c('div',{staticClass:\"text-center title\"},[_vm._v(\"انشاء درس جديد\")]):_vm._e(),_c('div',{staticClass:\"form py-5\"},[_c('div',{staticClass:\"fields row\"},[_c('div',{staticClass:\"col-md-6\"},[_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(\"المرحلة الدراسية\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.lessonData.stage),expression:\"lessonData.stage\"}],staticClass:\"form-control\",on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.lessonData, \"stage\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])},_vm.getSections]}},[_c('option',{attrs:{\"selected\":\"\",\"value\":\"1\"}},[_vm._v(\"الصف الأول الاعدادي\")]),_c('option',{attrs:{\"selected\":\"\",\"value\":\"2\"}},[_vm._v(\"الصف الثاني الاعدادي\")]),_c('option',{attrs:{\"selected\":\"\",\"value\":\"3\"}},[_vm._v(\"الصف الثالث الاعدادي\")]),_c('option',{attrs:{\"selected\":\"\",\"value\":\"4\"}},[_vm._v(\"الصف الأول الثانوي\")]),_c('option',{attrs:{\"selected\":\"\",\"value\":\"5\"}},[_vm._v(\"الصف الثاني الثانوي\")]),_c('option',{attrs:{\"selected\":\"\",\"value\":\"6\"}},[_vm._v(\"الصف الثالث الثانوي\")])])])]),_c('div',{staticClass:\"col-md-6\"},[_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(\"الدورة\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.lessonData.section),expression:\"lessonData.section\"}],staticClass:\"form-control\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.lessonData, \"section\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.sections),function(section){return _c('option',{key:section._id,domProps:{\"value\":section.number}},[_vm._v(\" \"+_vm._s(section.name)+\" \")])}),0)])]),_c('div',{staticClass:\"col-md-6\"},[_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(\"مدفوع أم مجاني\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.lessonData.paid),expression:\"lessonData.paid\"}],staticClass:\"form-control\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.lessonData, \"paid\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{domProps:{\"value\":false}},[_vm._v(\"Free\")]),_c('option',{domProps:{\"value\":true}},[_vm._v(\"Paid\")])])])]),_c('div',{staticClass:\"col-md-6\"},[_c('div',{staticClass:\"field\"},[_c('label',[_vm._v(\"رقم الدرس\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.lessonData.number),expression:\"lessonData.number\",modifiers:{\"number\":true}}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"min\":\"1\",\"placeholder\":\"رقم الدرس\"},domProps:{\"value\":(_vm.lessonData.number)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.lessonData, \"number\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('div',{staticClass:\"field col-md-12\"},[_c('label',[_vm._v(\"عنوان الدرس\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.lessonData.name),expression:\"lessonData.name\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"عنوان الدرس\"},domProps:{\"value\":(_vm.lessonData.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.lessonData, \"name\", $event.target.value)}}})]),_c('div',{staticClass:\"field col-md-12\"},[_c('label',[_vm._v(\"تاريخ عرض الدرس\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.lessonData.showDate),expression:\"lessonData.showDate\"}],staticClass:\"form-control\",attrs:{\"type\":\"date\",\"placeholder\":\"تاريخ عرض الدرس\"},domProps:{\"value\":(_vm.lessonData.showDate)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.lessonData, \"showDate\", $event.target.value)}}})]),_c('div',{staticClass:\"field col-md-12\"},[_c('label',[_vm._v(\"الشرح\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.lessonData.explain),expression:\"lessonData.explain\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.lessonData.explain)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.lessonData, \"explain\", $event.target.value)}}})]),_c('div',{staticClass:\"field col-md-12\"},[_c('label',[_vm._v(\"الملف المرفق\")]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-6 icon_btn\"},[_c('label',[_vm._v(\"ارفع ملف\")]),_c('input',{ref:\"file\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"change\":_vm.getFile}}),_c('div',{staticClass:\"pick\",on:{\"click\":function($event){return _vm.$refs.file.click()}}},[_c('i',{staticClass:\"fa fa-upload\"})])]),(_vm.file.includes('http'))?_c('div',{staticClass:\"col-md-6 icon_btn\"},[_c('label',[_vm._v(\"حمل الملف\")]),_c('a',{ref:\"download\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"click\":function($event){return _vm.downloadFile(_vm.id)}}},[_vm._v(\"download\")]),_c('div',{staticClass:\"pick\",on:{\"click\":function($event){return _vm.$refs.download.click()}}},[_c('i',{staticClass:\"fa fa-download\",staticStyle:{\"color\":\"#000\"}})])]):_vm._e(),_c('div',{staticClass:\"col-md-12\"},[_vm._v(\" \"+_vm._s(_vm.file)+\" \"),(_vm.file && _vm.file != '')?_c('h5',{staticStyle:{\"background\":\"#222\",\"padding\":\"5px\",\"text-align\":\"center\",\"color\":\"#fff\"}},[_vm._v(\" \"+_vm._s(_vm.filesName)+\" \")]):_vm._e()])])]),_c('div',{staticClass:\"field col-md-12\"},[_c('label',[_vm._v(\"نوع الفيديو\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.method),expression:\"method\"}],staticClass:\"form-control\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.method=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"embedded\"}},[_vm._v(\"رابط يوتيوب مدمج\")])])])]),(_vm.method == 'upload')?_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('stream-upload-video',{attrs:{\"fileName\":_vm.filesName,\"lessonData\":_vm.lessonData},on:{\"uploaded\":_vm.handleVideoFileUpload}})],1),(_vm.videoType == 'uploaded')?_c('div',{staticClass:\"preview col-md-12\"},[_c('video',{attrs:{\"height\":\"100%\",\"width\":\"100%\",\"id\":\"video\",\"src\":_vm.url + '/bufferVideo/' + _vm.lessonData.video,\"frameborder\":\"3\",\"allow\":\"autoplay;\",\"allowfullscreen\":\"\",\"controls\":\"\"}})]):_vm._e()]):_vm._e(),(_vm.loading && _vm.progress === 0)?_c('loading',{attrs:{\"color\":\"#fff\"}}):_vm._e(),(_vm.method == 'embedded')?_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"field upload2 col-md-12\"},[_c('label',[_vm._v(\"رابط اليوتيوب العادي\")]),(_vm.method === 'embedded')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ytUrl),expression:\"ytUrl\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"ضع رابط يوتويب هنا\"},domProps:{\"value\":(_vm.ytUrl)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.ytUrl=$event.target.value}}}):_vm._e()]),_c('div',{staticClass:\"field upload2 col-md-12\"},[_c('label',[_vm._v(\"رابط اليوتيوب المدمج\")]),(_vm.method === 'embedded')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.video),expression:\"video\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"placeholder\":\"ضع رابط يوتويب المدمج هنا\"},domProps:{\"value\":(_vm.video)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.video=$event.target.value}}}):_vm._e()]),(_vm.videoType == 'embedded')?_c('div',{staticClass:\"preview col-md-12\"},[_c('iframe',{attrs:{\"width\":\"100%\",\"height\":\"300px\",\"src\":_vm.lessonData.video}})]):_vm._e(),(_vm.loading || _vm.progress)?_c('div',{staticClass:\"col-md-12\"},[(_vm.progress > 0)?_c('div',{staticClass:\"progress\"},[_c('div',{staticClass:\"progressbar\",style:({ width: _vm.progress + '%' })},[_vm._v(\" \"+_vm._s(_vm.progress)+\"% \")])]):_vm._e()]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"col-md-4\"},[_c('button',{staticClass:\"btn btn-danger\",on:{\"click\":_vm.uploadVideo}},[_vm._v(\"Upload video\")])]),(_vm.id)?_c('div',{staticClass:\"col-md-4\"},[_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.$router.push('/dashboard/addTask/' + _vm.id)}}},[_vm._v(\" الواجب \")])]):_vm._e()])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"cont py-5\">\n    <div class=\"video-upload\">\n      <div v-if=\"edit === true\" class=\"text-center title\">تعديل معلومات الدرس</div>\n      <div v-if=\"edit === false\" class=\"text-center title\">انشاء درس جديد</div>\n      <div class=\"form py-5\">\n        <div class=\"fields row\">\n          <div class=\"col-md-6\">\n            <div class=\"field\">\n              <label>المرحلة الدراسية</label>\n              <select\n                @change=\"getSections\"\n                v-model=\"lessonData.stage\"\n                class=\"form-control\"\n              >\n                <option selected value=\"1\">الصف الأول الاعدادي</option>\n                <option selected value=\"2\">الصف الثاني الاعدادي</option>\n                <option selected value=\"3\">الصف الثالث الاعدادي</option>\n                <option selected value=\"4\">الصف الأول الثانوي</option>\n                <option selected value=\"5\">الصف الثاني الثانوي</option>\n                <option selected value=\"6\">الصف الثالث الثانوي</option>\n              </select>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"field\">\n              <label>الدورة</label>\n              <select v-model=\"lessonData.section\" class=\"form-control\">\n                <option\n                  v-for=\"section in sections\"\n                  :key=\"section._id\"\n                  :value=\"section.number\"\n                >\n                  {{ section.name }}\n                </option>\n              </select>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"field\">\n              <label>مدفوع أم مجاني</label>\n              <select v-model=\"lessonData.paid\" class=\"form-control\">\n                <option :value=\"false\">Free</option>\n                <option :value=\"true\">Paid</option>\n              </select>\n            </div>\n          </div>\n          <div class=\"col-md-6\">\n            <div class=\"field\">\n              <label>رقم الدرس</label>\n              <input\n                v-model.number=\"lessonData.number\"\n                class=\"form-control\"\n                type=\"number\"\n                min=\"1\"\n                placeholder=\"رقم الدرس\"\n              />\n            </div>\n          </div>\n\n          <div class=\"field col-md-12\">\n            <label>عنوان الدرس</label>\n            <input\n              v-model=\"lessonData.name\"\n              class=\"form-control\"\n              type=\"text\"\n              placeholder=\"عنوان الدرس\"\n            />\n          </div>\n\n          <div class=\"field col-md-12\">\n            <label>تاريخ عرض الدرس</label>\n            <input\n              v-model=\"lessonData.showDate\"\n              class=\"form-control\"\n              type=\"date\"\n              placeholder=\"تاريخ عرض الدرس\"\n            />\n          </div>\n          <div class=\"field col-md-12\">\n            <label>الشرح</label>\n            <textarea\n              v-model=\"lessonData.explain\"\n              class=\"form-control\"\n              type=\"text\"\n            ></textarea>\n          </div>\n\n          <!--------------------FILE ATTACHMENT-------------------------------->\n          <div class=\"field col-md-12\">\n            <label>الملف المرفق</label>\n            <div class=\"row\">\n              <div class=\"col-md-6 icon_btn\">\n                <label>ارفع ملف</label>\n                <input style=\"display: none\" @change=\"getFile\" type=\"file\" ref=\"file\" />\n                <div @click=\"$refs.file.click()\" class=\"pick\">\n                  <i class=\"fa fa-upload\"></i>\n                </div>\n              </div>\n              <div v-if=\"file.includes('http')\" class=\"col-md-6 icon_btn\">\n                <label>حمل الملف</label>\n                <a\n                  style=\"display: none\"\n                  @click=\"downloadFile(id)\"\n                  type=\"file\"\n                  ref=\"download\"\n                  >download</a\n                >\n                <div @click=\"$refs.download.click()\" class=\"pick\">\n                  <i style=\"color: #000\" class=\"fa fa-download\"></i>\n                </div>\n              </div>\n              <div class=\"col-md-12\">\n                {{ file }}\n                <h5\n                  v-if=\"file && file != ''\"\n                  style=\"background: #222; padding: 5px; text-align: center; color: #fff\"\n                >\n                  {{ filesName }}\n                </h5>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"field col-md-12\">\n            <label>نوع الفيديو</label>\n            <select v-model=\"method\" class=\"form-control\">\n              <!-- <option disabled value=\"upload\">من الجهاز</option> -->\n              <option value=\"embedded\">رابط يوتيوب مدمج</option>\n            </select>\n          </div>\n        </div>\n\n        <!-------------------UPLOAD VIDEO FROM DEVICE--------------------------->\n        <div v-if=\"method == 'upload'\" class=\"row\">\n          <div class=\"col-md-12\">\n            <stream-upload-video\n              :fileName=\"filesName\"\n              @uploaded=\"handleVideoFileUpload\"\n              :lessonData=\"lessonData\"\n            />\n          </div>\n          <!---UPLOADED VIDEO PREVIEW--->\n          <div class=\"preview col-md-12\" v-if=\"videoType == 'uploaded'\">\n            <video\n              height=\"100%\"\n              width=\"100%\"\n              id=\"video\"\n              :src=\"url + '/bufferVideo/' + lessonData.video\"\n              frameborder=\"3\"\n              allow=\"autoplay;\"\n              allowfullscreen\n              controls\n            ></video>\n          </div>\n        </div>\n\n        <!-------------------------LOADING-------------------------------->\n        <loading color=\"#fff\" v-if=\"loading && progress === 0\" />\n\n        <!-----------------EMBEDDED VIDEO UPLOAD-------------------------->\n        <div v-if=\"method == 'embedded'\" class=\"row justify-content-center\">\n          <div class=\"field upload2 col-md-12\">\n            <label>رابط اليوتيوب العادي</label>\n            <input\n              v-if=\"method === 'embedded'\"\n              class=\"form-control\"\n              v-model=\"ytUrl\"\n              type=\"text\"\n              placeholder=\"ضع رابط يوتويب هنا\"\n            />\n          </div>\n          <!---LINK--->\n          <div class=\"field upload2 col-md-12\">\n            <label>رابط اليوتيوب المدمج</label>\n            <input\n              v-if=\"method === 'embedded'\"\n              class=\"form-control\"\n              v-model=\"video\"\n              type=\"text\"\n              placeholder=\"ضع رابط يوتويب المدمج هنا\"\n            />\n          </div>\n          <!---PREVIEW--->\n          <div class=\"preview col-md-12\" v-if=\"videoType == 'embedded'\">\n            <iframe width=\"100%\" height=\"300px\" :src=\"lessonData.video\"></iframe>\n          </div>\n          <!--- PROGRESS ---->\n          <div v-if=\"loading || progress\" class=\"col-md-12\">\n            <div v-if=\"progress > 0\" class=\"progress\">\n              <div class=\"progressbar\" :style=\"{ width: progress + '%' }\">\n                {{ progress }}%\n              </div>\n            </div>\n          </div>\n          <!----UPLOAD--->\n        </div>\n        <!--------------------------->\n        <div class=\"row justify-content-center\">\n          <div class=\"col-md-4\">\n            <button @click=\"uploadVideo\" class=\"btn btn-danger\">Upload video</button>\n          </div>\n          <div v-if=\"id\" class=\"col-md-4\">\n            <button\n              @click=\"$router.push('/dashboard/addTask/' + id)\"\n              class=\"btn btn-primary\"\n            >\n              الواجب\n            </button>\n          </div>\n        </div>\n        <!--------------------------->\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport Loading from \"../../components/loading.vue\";\nimport StreamUploadVideo from \"../admin/stream_upload_video\";\nimport { url } from \"../../main\";\nexport default {\n  components: {\n    Loading,\n    StreamUploadVideo,\n  },\n  created() {\n    const params = this.$route.params;\n    if (params.id) {\n      this.id = params.id;\n      axios.get(\"/fetchVideo/\" + params.id).then(async (res) => {\n        this.lessonData = res.data.video;\n        this.video = res.data.video.videoPath;\n        this.file = res.data.video.filePath;\n        if (res.data.video.videoPath.includes(\"embed\")) {\n          this.method = \"embedded\";\n        } else this.method = \"upload\";\n        this.edit = true;\n        this.getSections();\n      });\n    }\n    if (localStorage.getItem(\"chunks\")) {\n      this.method = \"upload\";\n    }\n  },\n  data() {\n    return {\n      lessonData: {\n        number: 1,\n        name: null,\n        stage: \"3\",\n        explain: null,\n        section: null,\n        paid: false,\n        video: null,\n        file: \"\",\n        showDate: \"\",\n      },\n      id: null,\n      edit: false,\n      progress: 0,\n      method: \"embedded\",\n      loading: false,\n      sections: [],\n      url: axios.defaults.baseURL,\n      video: null,\n      file: \"\",\n      ytUrl: \"\",\n    };\n  },\n  computed: {\n    formData() {\n      const formData = new FormData();\n      formData.append(\"number\", this.lessonData.number);\n      formData.append(\"name\", this.lessonData.name);\n      formData.append(\"stage\", this.lessonData.stage);\n      formData.append(\"video\", this.lessonData.video);\n      formData.append(\"date\", new Date());\n      formData.append(\"showDate\", this.lessonData.showDate);\n      formData.append(\"file\", this.lessonData.file);\n      formData.append(\"explain\", this.lessonData.explain);\n      formData.append(\"section\", this.lessonData.section);\n      formData.append(\"paid\", this.lessonData.paid);\n      formData.append(\"fileName\", this.lessonData.filesName);\n      return formData;\n    },\n    filesName() {\n      return `${this.lessonData.section}_${this.lessonData.name}_${this.lessonData.number}_${this.lessonData.stage}`;\n    },\n    fileName() {\n      return this.file || \"\";\n    },\n    videoType() {\n      if (!this.video) return null;\n      if (this.video.includes(\"embed\")) return \"embedded\";\n      else if (!this.video.includes(\"http\")) return \"uploaded\";\n      else return null;\n    },\n  },\n  watch: {\n    video(val) {\n      this.lessonData.video = val;\n    },\n    ytUrl(val) {\n      let id = val.split(\"v=\")[1];\n      if (val.includes(\"shorts\")) {\n        const slashes = val.split(\"/\");\n        const length = slashes.length;\n        id = slashes[length - 1];\n      }\n      this.video = `https://www.youtube.com/embed/${id}`;\n    },\n  },\n  methods: {\n    getSections() {\n      axios.get(\"/getSectionsByStage/\" + this.lessonData.stage).then((res) => {\n        this.sections = res.data.sections;\n      });\n    },\n    getFile(event) {\n      const file = event.target.files[0];\n      if (\n        ![\n          \"jpg\",\n          \"jpeg\",\n          \"png\",\n          \"pdf\",\n          \"mp4\",\n          \"mp3\",\n          \"text\",\n          \"avi\",\n          \"3gp\",\n          \"rar\",\n          \"zip\",\n          \"plain\",\n        ].includes(file.type.split(\"/\")[1])\n      ) {\n        if (file.type.length > 0) return alert(\"صيغة الملف غير مسموح بها\");\n      }\n      if (file.size > 10000000) {\n        alert(\"حجم الملف أكبر من المسموح به\");\n        return;\n      }\n      this.file = file.name;\n      this.lessonData.file = file;\n    },\n    ////////////////////////////////////////\n    handleVideoFileUpload(videoFile) {\n      this.formData.set(\"video\", videoFile);\n      this.uploadVideo();\n    },\n    ////////////////////////////////////////\n    uploadVideo() {\n      if (!this.lessonData.name || !this.lessonData.section || !this.lessonData.stage) {\n        return alert(\"كمل بقيت البيانات وأرفع الفيديو\");\n      }\n      this.loading = true;\n      let path = this.edit ? \"/editVideo/\" + this.id : \"/uploadVideo\";\n      axios\n        .post(path, this.formData, {\n          onUploadProgress: (progress) => {\n            var val = Math.floor((progress.loaded / progress.total) * 100);\n            this.progress = val === 100 ? 0 : val;\n          },\n        })\n        .then((res) => {\n          this.loading = false;\n          if (res.data.done) {\n            this.$store.dispatch(\"writemessage\", \"تم رفع الدرس بنجاح\");\n            this.id = res.data.id;\n          } else {\n            this.$store.dispatch(\"writemessage\", res.data.err);\n          }\n        });\n    },\n    /////////////////////////////////////////////////\n    downloadFile(id) {\n      const fileUrl = this.url + \"/downloadFile/\" + id;\n      window.open(fileUrl, \"_blank\");\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.cont {\n  padding: 0;\n  background: url(\"../../assets/img/upload_video.jpg\") fixed center center;\n  background-repeat: no-repeat;\n  // background-color: #000;\n  background-size: cover;\n  .video-upload {\n    margin: 0 auto;\n    direction: rtl;\n    padding: 0px auto;\n    width: 70%;\n    @media (max-width: 600px) {\n      width: 99%;\n    }\n    .title {\n      font-size: 58px;\n      font-weight: bold;\n      background: #000;\n      color: rgb(228, 231, 231);\n      margin: 14px auto;\n      padding: 10px 3px;\n    }\n    .form {\n      background-color: rgba(97, 94, 89, 0.74);\n      padding: 35px;\n      @media (max-width: 600px) {\n        padding: 0;\n        padding-bottom: 30px;\n      }\n      // .fields {\n      .field {\n        margin: 8px;\n        label {\n          text-align: right;\n          color: rgba(228, 231, 231, 0.762);\n          font-size: 24px;\n          font-weight: bolder;\n          @media (max-width: 600px) {\n            font-size: 1rem;\n          }\n        }\n        input,\n        textarea,\n        select {\n          background-color: rgb(230, 228, 228);\n          box-shadow: 5px 10px 8px 2px #888888;\n        }\n      }\n      // }\n    }\n  }\n  .pick {\n    color: rgba(241, 241, 241, 0.898);\n    font-size: 30px;\n    text-align: right;\n    @media (max-width: 600px) {\n      font-size: 22px;\n      text-align: center;\n    }\n    span {\n      margin-right: 10px;\n    }\n  }\n  .icon_btn {\n    display: flex;\n    flex-direction: column-reverse;\n    justify-content: center;\n    align-items: center;\n    label {\n      color: rgb(228, 231, 231);\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload_video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload_video.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./upload_video.vue?vue&type=template&id=5158c647&scoped=true&\"\nimport script from \"./upload_video.vue?vue&type=script&lang=js&\"\nexport * from \"./upload_video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./upload_video.vue?vue&type=style&index=0&id=5158c647&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5158c647\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./upload_video.vue?vue&type=style&index=0&id=5158c647&lang=scss&scoped=true&\"","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","'use strict';\nvar $ = require('../internals/export');\nvar toInteger = require('../internals/to-integer');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = String(data[index]);\n      s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toInteger(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('div',{staticClass:\"form-group\"},[_c('label',[_vm._v(\"قم برفع فيديو\")]),_c('input',{ref:\"file\",staticClass:\"form-control\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.getVideo}})])])]),(_vm.percentage > 0)?_c('div',{staticClass:\"progress\"},[_c('div',{staticClass:\"progressbar\",style:({ width: _vm.percentage + '%' })},[_vm._v(\" \"+_vm._s(_vm.percentage)+\"% \")])]):_vm._e(),_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"col-md-4\"},[_c('button',{staticClass:\"btn btn-primary w-100\",attrs:{\"disabled\":!_vm.uploadBtnEnabled},on:{\"click\":_vm.upload}},[_vm._v(\" Upload \")])]),(_vm.resumeBtnEnabled || _vm.pauseBtnEnabled)?_c('div',{staticClass:\"col-md-4\"},[(_vm.resumeBtnEnabled)?_c('button',{staticClass:\"btn btn-success w-100\",on:{\"click\":_vm.resumePause}},[_vm._v(\" resume \")]):_vm._e(),(_vm.pauseBtnEnabled)?_c('button',{staticClass:\"btn btn-secondary w-100\",on:{\"click\":_vm.resumePause}},[_vm._v(\" pause \")]):_vm._e()]):_vm._e(),_c('div',{staticClass:\"col-md-4\"},[_c('button',{staticClass:\"btn btn-danger w-100\",attrs:{\"disabled\":!_vm.cancelBtnEnabled},on:{\"click\":_vm.reset}},[_vm._v(\" Cancel \")])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <div class=\"row\">\n      <div class=\"col-md-12\">\n        <div class=\"form-group\">\n          <label>قم برفع فيديو</label>\n          <input ref=\"file\" @change=\"getVideo\" type=\"file\" class=\"form-control\" />\n        </div>\n      </div>\n    </div>\n    <!-- PROGRESS -->\n    <div v-if=\"percentage > 0\" class=\"progress\">\n      <div class=\"progressbar\" :style=\"{ width: percentage + '%' }\">\n        {{ percentage }}%\n      </div>\n    </div>\n    <div class=\"row justify-content-center\">\n      <div class=\"col-md-4\">\n        <button\n          :disabled=\"!uploadBtnEnabled\"\n          @click=\"upload\"\n          class=\"btn btn-primary w-100\"\n        >\n          Upload\n        </button>\n      </div>\n      <div v-if=\"resumeBtnEnabled || pauseBtnEnabled\" class=\"col-md-4\">\n        <button\n          v-if=\"resumeBtnEnabled\"\n          @click=\"resumePause\"\n          class=\"btn btn-success w-100\"\n        >\n          resume\n        </button>\n        <button\n          v-if=\"pauseBtnEnabled\"\n          @click=\"resumePause\"\n          class=\"btn btn-secondary w-100\"\n        >\n          pause\n        </button>\n      </div>\n      <div class=\"col-md-4\">\n        <button :disabled=\"!cancelBtnEnabled\" @click=\"reset\" class=\"btn btn-danger w-100\">\n          Cancel\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { url } from \"../../main\";\nimport Axios from \"axios\";\nexport default {\n  name: \"stream-upload-video\",\n  props: [\"fileName\", \"lessonData\"],\n  created() {\n    // if (localStorage.getItem(\"chunks\")) {\n    //   this.chunks = JSON.parse(localStorage.getItem(\"chunks\"));\n    //   this.upload();\n    // }\n  },\n  data() {\n    return {\n      file: null,\n      chunks: [],\n      uploaded: 0,\n      startUpdate: false,\n      resume: true,\n    };\n  },\n  watch: {\n    formData(val) {},\n  },\n  filters: {},\n  watch: {\n    chunks(val) {\n      if (val.length > 0 && this.startUpdate) {\n        this.upload();\n        localStorage.setItem(\"chunks\", JSON.stringify(this.chunks));\n      }\n    },\n  },\n  computed: {\n    percentage() {\n      if (!this.file) return 0;\n      return ((this.uploaded * 100) / this.file.size).toFixed(1);\n    },\n    uploadBtnEnabled() {\n      return this.chunks.length > 0 && this.uploaded == 0;\n    },\n    resumeBtnEnabled() {\n      return this.chunks.length > 0 && !this.resume && this.uploaded > 0;\n    },\n    pauseBtnEnabled() {\n      return this.chunks.length > 0 && this.resume && this.uploaded > 0;\n    },\n    cancelBtnEnabled() {\n      return this.chunks.length > 0 && this.uploaded > 0;\n    },\n  },\n  methods: {\n    getVideo(e) {\n      const file = e.target.files[0];\n      const type = file.type.split(\"/\")[1];\n      if (![\"mp4\", \"wav\"].includes(type)) return alert(\"صيغة الفيديو غير صحيحة\");\n      if (file.size > 10 ** 9) return alert(\"حجم الملف تجاوز الحجم المسموح به\");\n      this.file = file;\n      this.createChunks();\n    },\n    upload() {\n      if (this.chunks.length == 0) return;\n      if (!this.lessonData.name || !this.lessonData.section || !this.lessonData.stage) {\n        return alert(\"كمل بقيت البيانات وأرفع الفيديو\");\n      }\n      if (!this.resume) return;\n      this.startUpdate = true;\n      const formData = new FormData();\n      formData.set(\"isLast\", this.chunks.length == 1);\n      formData.set(\"fileName\", this.fileName);\n      formData.set(\"chunk\", this.chunks[0], this.file.name + \".chunk\");\n      const config = {\n        method: \"POST\",\n        url: \"/uploadVideoByChunks\",\n        data: formData,\n        headers: { \"Content-Type\": \"application/octet-stream\" },\n        onUploadProgress: (e) => {\n          this.uploaded += e.loaded;\n        },\n      };\n      Axios(config)\n        .then((res) => {\n          this.chunks.shift();\n          if (res.data.done) {\n            this.$emit(\"uploaded\", res.data.videoFile);\n            this.reset();\n          }\n        })\n        .catch((e) => console.log(e));\n    },\n    createChunks() {\n      const size = this.file.size;\n      const chunkSize = 10 * 10 ** 5;\n      const chunksLen = Math.ceil(size / chunkSize);\n      for (let i = 0; i < chunksLen; i++) {\n        const slice = this.file.slice(\n          i * chunkSize,\n          Math.min(i * chunkSize + chunkSize, this.file.size),\n          this.file.type\n        );\n        this.chunks.push(slice);\n      }\n    },\n    resumePause() {\n      this.resume = !this.resume;\n      if (this.resume) this.upload();\n    },\n    reset() {\n      this.chunks = [];\n      this.file = null;\n      this.uploaded = 0;\n      localStorage.removeItem(\"chunks\");\n      this.resume = true;\n      this.startUpdate = false;\n      this.$refs.file.value = \"\";\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\nlabel {\n  text-align: right;\n  color: rgba(228, 231, 231, 0.762);\n  font-size: 24px;\n  font-weight: bolder;\n  @media (max-width: 600px) {\n    font-size: 1rem;\n  }\n}\ninput,\ntextarea,\nselect {\n  background-color: rgb(230, 228, 228);\n  box-shadow: 5px 10px 8px 2px #888888;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stream_upload_video.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./stream_upload_video.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./stream_upload_video.vue?vue&type=template&id=57da223a&scoped=true&\"\nimport script from \"./stream_upload_video.vue?vue&type=script&lang=js&\"\nexport * from \"./stream_upload_video.vue?vue&type=script&lang=js&\"\nimport style0 from \"./stream_upload_video.vue?vue&type=style&index=0&id=57da223a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57da223a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}