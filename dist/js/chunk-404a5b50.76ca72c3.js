(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-404a5b50"],{"0667":function(t,e,n){"use strict";n("a89b")},1148:function(t,e,n){"use strict";var s=n("a691"),i=n("1d80");t.exports="".repeat||function(t){var e=String(i(this)),n="",a=s(t);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(n+=e);return n}},"408a":function(t,e,n){var s=n("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=s(t))throw TypeError("Incorrect invocation");return+t}},a89b:function(t,e,n){},ade3:function(t,e,n){"use strict";function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return s}))},b680:function(t,e,n){"use strict";var s=n("23e7"),i=n("a691"),a=n("408a"),r=n("1148"),o=n("d039"),u=1..toFixed,c=Math.floor,l=function(t,e,n){return 0===e?n:e%2===1?l(t,e-1,n*t):l(t*t,e/2,n)},d=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},h=function(t,e,n){var s=-1,i=n;while(++s<6)i+=e*t[s],t[s]=i%1e7,i=c(i/1e7)},f=function(t,e){var n=6,s=0;while(--n>=0)s+=t[n],t[n]=c(s/e),s=s%e*1e7},p=function(t){var e=6,n="";while(--e>=0)if(""!==n||0===e||0!==t[e]){var s=String(t[e]);n=""===n?s:n+r.call("0",7-s.length)+s}return n},b=u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){u.call({})}));s({target:"Number",proto:!0,forced:b},{toFixed:function(t){var e,n,s,o,u=a(this),c=i(t),b=[0,0,0,0,0,0],m="",v="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(m="-",u=-u),u>1e-21)if(e=d(u*l(2,69,1))-69,n=e<0?u*l(2,-e,1):u/l(2,e,1),n*=4503599627370496,e=52-e,e>0){h(b,0,n),s=c;while(s>=7)h(b,1e7,0),s-=7;h(b,l(10,s,1),0),s=e-1;while(s>=23)f(b,1<<23),s-=23;f(b,1<<s),h(b,1,1),f(b,2),v=p(b)}else h(b,0,n),h(b,1<<-e,0),v=p(b)+r.call("0",c);return c>0?(o=v.length,v=m+(o<=c?"0."+r.call("0",c-o)+v:v.slice(0,o-c)+"."+v.slice(o-c))):v=m+v,v}})},bd80:function(t,e,n){"use strict";n.r(e);var s,i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"form-group"},[n("label",[t._v("قم برفع فيديو")]),n("input",{ref:"file",staticClass:"form-control",attrs:{type:"file"},on:{change:t.getVideo}})])])]),t.percentage>0?n("div",{staticClass:"progress"},[n("div",{staticClass:"progressbar",style:{width:t.percentage+"%"}},[t._v(" "+t._s(t.percentage)+"% ")])]):t._e(),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-md-4"},[n("button",{staticClass:"btn btn-primary w-100",attrs:{disabled:!t.uploadBtnEnabled},on:{click:t.upload}},[t._v(" Upload ")])]),t.resumeBtnEnabled||t.pauseBtnEnabled?n("div",{staticClass:"col-md-4"},[t.resumeBtnEnabled?n("button",{staticClass:"btn btn-success w-100",on:{click:t.resumePause}},[t._v(" resume ")]):t._e(),t.pauseBtnEnabled?n("button",{staticClass:"btn btn-secondary w-100",on:{click:t.resumePause}},[t._v(" pause ")]):t._e()]):t._e(),n("div",{staticClass:"col-md-4"},[n("button",{staticClass:"btn btn-danger w-100",attrs:{disabled:!t.cancelBtnEnabled},on:{click:t.reset}},[t._v(" Cancel ")])])])])},a=[],r=(n("caad"),n("fb6a"),n("b0c0"),n("b680"),n("ac1f"),n("1276"),n("ade3")),o=(n("56d7"),n("bc3a")),u=n.n(o),c=(s={name:"stream-upload-video",props:["fileName","lessonData"],created:function(){},data:function(){return{file:null,chunks:[],uploaded:0,startUpdate:!1,resume:!0}},watch:{formData:function(t){}},filters:{}},Object(r["a"])(s,"watch",{chunks:function(t){t.length>0&&this.startUpdate&&(this.upload(),localStorage.setItem("chunks",JSON.stringify(this.chunks)))}}),Object(r["a"])(s,"computed",{percentage:function(){return this.file?(100*this.uploaded/this.file.size).toFixed(1):0},uploadBtnEnabled:function(){return this.chunks.length>0&&0==this.uploaded},resumeBtnEnabled:function(){return this.chunks.length>0&&!this.resume&&this.uploaded>0},pauseBtnEnabled:function(){return this.chunks.length>0&&this.resume&&this.uploaded>0},cancelBtnEnabled:function(){return this.chunks.length>0&&this.uploaded>0}}),Object(r["a"])(s,"methods",{getVideo:function(t){var e=t.target.files[0],n=e.type.split("/")[1];return["mp4","wav"].includes(n)?e.size>Math.pow(10,9)?alert("حجم الملف تجاوز الحجم المسموح به"):(this.file=e,void this.createChunks()):alert("صيغة الفيديو غير صحيحة")},upload:function(){var t=this;if(0!=this.chunks.length){if(!this.lessonData.name||!this.lessonData.section||!this.lessonData.stage)return alert("كمل بقيت البيانات وأرفع الفيديو");if(this.resume){this.startUpdate=!0;var e=new FormData;e.set("isLast",1==this.chunks.length),e.set("fileName",this.fileName),e.set("chunk",this.chunks[0],this.file.name+".chunk");var n={method:"POST",url:"/uploadVideoByChunks",data:e,headers:{"Content-Type":"application/octet-stream"},onUploadProgress:function(e){t.uploaded+=e.loaded}};u()(n).then((function(e){t.chunks.shift(),e.data.done&&(t.$emit("uploaded",e.data.videoFile),t.reset())})).catch((function(t){return console.log(t)}))}}},createChunks:function(){for(var t=this.file.size,e=10*Math.pow(10,5),n=Math.ceil(t/e),s=0;s<n;s++){var i=this.file.slice(s*e,Math.min(s*e+e,this.file.size),this.file.type);this.chunks.push(i)}},resumePause:function(){this.resume=!this.resume,this.resume&&this.upload()},reset:function(){this.chunks=[],this.file=null,this.uploaded=0,localStorage.removeItem("chunks"),this.resume=!0,this.startUpdate=!1,this.$refs.file.value=""}}),s),l=c,d=(n("0667"),n("2877")),h=Object(d["a"])(l,i,a,!1,null,"57da223a",null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-404a5b50.76ca72c3.js.map