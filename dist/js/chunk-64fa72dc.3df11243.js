(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64fa72dc"],{"05f2":function(e,t,s){"use strict";s("9697")},2194:function(e,t,s){},"345d":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"lessons"}},[s("div",{staticClass:"overlay-image",style:{background:"url('"+e.adminData.image1.replace("http","https")+"') fixed center center no-repeat",backgroundSize:"100% 100%"}}),s("div",{staticClass:"content-fixed",staticStyle:{background:"#191b1e99"}},[e.videoStarted?e._e():s("div",{staticClass:"toggle",on:{click:e.toggle}},[s("i",{staticClass:"fa fa-list"})]),s("div",{staticClass:"videos-wrapper"},[s("div",{staticClass:"text-center heading"},[s("h1",{},[e._v("منصة "+e._s(e.adminData.siteName)+" "),s("span")]),s("hr"),s("h4",{},[e._v("لطلبة الثانوية العامة")])]),s("hr"),e.lesson||e.exam||e.solution||e.$route.params.lessonId||e.$route.params.userId?e._e():s("div",{staticClass:"choose"},[s("h2",[e._v("اختار درس أو أمتحان...")])]),e.lesson?s("lesson",{attrs:{lesson:e.lesson,userData:e.userData},on:{videoStarted:function(t){return e.videoStarted=t}}}):e._e(),s("div",{staticClass:"p-md-2 p-0"},[e.examLoading?s("loading"):e._e(),e.exam&&e.solutionModel?s("exam",{attrs:{exam:e.exam,isExam:!0,solution_model:e.solutionModel}}):e._e(),e.solution?s("exam",{attrs:{isResult:!0,exam:e.solution}}):e._e(),s("router-view")],1)],1),s("div",{staticClass:"videos-sidebar",class:{open:e.open}},[s("div",{staticClass:"sidebar-overlay"}),s("nav",{staticStyle:{"padding-top":"70px"}},[e._m(0),s("div",{staticClass:"center"},[e.loading1?s("loading"):e._e()],1),e.loading1?e._e():s("ul",{staticClass:"mb-5"},e._l(e.lessons,(function(t,a){return s("li",{key:a,staticClass:"mt-2",class:{aligned:!0,locked:t.locked,active:a===e.number},attrs:{dir:"rtl"},on:{click:function(){return e.openLesson(e.lessons[a],a)}}},[s("div",{staticClass:"right"},[s("span",[e._v("("+e._s(t.number)+") ")]),s("span",[e._v("("+e._s(t.name)+")")])]),e._m(1,!0)])})),0),e._m(2),s("div",{staticClass:"center"},[e.loading2?s("loading"):e._e()],1),e.loading2?e._e():s("ul",{staticClass:"mb-5 exams-ul"},e._l(e.exams,(function(t,a){return s("li",{key:a,staticClass:"mt-2",class:{aligned:!0,active:a===e.exam_number},attrs:{dir:"rtl"}},[s("div",{on:{click:function(s){return e.startExam(t._id,a)}}},[s("h5",[e._v("أمتحان رقم ("+e._s(t.number)+")")]),s("h5",[e._v(e._s(t.name))])])])})),0)])])])])},n=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sidebar-header"},[s("h3",{},[e._v("قائمة الفيديوهات")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"left"},[a("img",{staticClass:"img-fluid",attrs:{width:"30px",height:"30px",src:s("c2b0"),alt:""}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"sidebar-header exams-header"},[s("h3",{},[e._v("قائمة الأمتحانات")])])}],o=(s("99af"),s("96cf"),s("1da1")),i=s("bc3a"),r=s.n(i),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-dark p-0",attrs:{id:"iframe_cont"}},[s("textarea",{staticStyle:{transform:"'translateY(-300vh)'"},attrs:{readonly:"",id:"textarea"}}),s("iframe",{style:e.played?"opacity:1":"opacity:0",attrs:{id:"video",src:e.src+"?theme=dark&autoplay=1&autohide=0&cc_load_policy=1&modestbranding=1&fs=0&showinfo=0&rel=0&iv_load_policy=3&mute=0&loop=0&enablejsapi=1&version=3&playerapiid=ytplayer&controls=1",frameborder:"3",allow:"autoplay;",allownetworking:"internal",sandbox:"allow-forms allow-scripts allow-pointer-lock allow-same-origin allow-top-navigation"}}),s("div",{staticClass:"cover-top"}),s("div",{staticClass:"toggleCtrl",on:{click:function(t){return e.$refs.ctrl.classList.toggle("show")}}},[s("i",{staticClass:"fa fa-cogs"})]),s("div",{ref:"ctrl",staticClass:"ctrl_bar"},[""!=e.src?s("div",{staticClass:"ctrl_btns bg-dark"},[s("div",{staticClass:"ctrl_btn"},[s("button",{on:{click:e.toggleVideoPlay}},[s("i",{staticClass:"ctrl_btn",class:e.playing?"fa fa-pause":"fa fa-play"})])]),s("div",{staticClass:"ctrl_btn"},[s("div",{staticClass:"slidecontainer"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.rate,expression:"rate"}],staticClass:"slider",attrs:{type:"range",step:.25,min:.25,max:2,id:"myRange"},domProps:{value:e.rate},on:{change:e.setSpeed,__r:function(t){e.rate=t.target.value}}})]),s("label",[e._v("speed")])]),s("div",{staticClass:"ctrl_btn"},[s("div",{staticClass:"slidecontainer"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.volume,expression:"volume"}],staticClass:"slider",attrs:{type:"range",step:1,min:0,max:100,id:"myRange"},domProps:{value:e.volume},on:{change:e.setVolume,__r:function(t){e.volume=t.target.value}}})]),s("label",[e._v("volume")])])]):e._e()])])},c=[],u=(s("d3b7"),s("81c3")),d={props:["src","userData","lessonId"],mounted:function(){var e=this;this.mobile=u["a"].isNative,this.deleteClipboard(),setTimeout((function(){var t=document.getElementById("video");t.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"),e.playing=!0,e.played=!0}),1500),this.setTimeOut2=setTimeout((function(){r.a.post("/addVideoView",{userId:e.$store.getters.userId,lessonId:e.lessonId}).then((function(e){}))}),12e4)},destroyed:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:clearTimeout(e.setTimeOut),clearTimeout(e.setTimeOut2);case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{playing:!1,played:!1,mobile:!1,setTimeOut:null,setTimeOut2:null,rate:1,volume:50,player:null}},computed:{watermark:function(){return this.$store.getters.adminData.watermark}},methods:{toggleVideoPlay:function(){var e=document.getElementById("video");this.playing?(e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*"),this.playing=!1):(e.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}',"*"),this.playing=!0)},setSpeed:function(){var e=+this.rate,t=document.getElementById("video"),s={event:"command",func:"setPlaybackRate",args:[e,!0]};t.contentWindow.postMessage(JSON.stringify(s),"*")},setVolume:function(){var e=+this.volume,t=document.getElementById("video"),s={event:"command",func:"setVolume",args:[e,!0]};t.contentWindow.postMessage(JSON.stringify(s),"*")},seekTo:function(){var e=document.getElementById("video"),t={event:"command",func:"seekTo",args:[200,!0]};e.contentWindow.postMessage(JSON.stringify(t),"*")},fullscreen:function(){var e=document.getElementsByClassName("video")[0];e.classList.toggle("fullscreen")},deleteClipboard:function(){var e=this;this.setTimeOut=setTimeout(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.copyToClipboard("كان غيرك اشطر").then((function(e){console.log(e)})).catch((function(e){console.log(e)}));case 2:e.deleteClipboard();case 3:case"end":return t.stop()}}),t)}))),1e3)},copyToClipboard:function(e){if(console.log(window.isSecureContext),!this.mobile){if(void 0!=navigator.clipboard)return new Promise(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(s,a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,navigator.clipboard.writeText(e);case 3:s("copied"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),a(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,s){return t.apply(this,arguments)}}());if(window.clipboardData)return new Promise((function(t,s){window.clipboardData.setData("Text",e),t("copied2")}));var t=document.getElementById("textarea");return t.value=e,t.select(),new Promise((function(e,t){document.execCommand("copy")?e("copied3"):t("error")}))}}}},m=d,v=(s("9162"),s("2877")),p=Object(v["a"])(m,l,c,!1,null,"92f2b020",null),f=p.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"p-0 bg-dark",staticStyle:{width:"100%",height:"100%"},attrs:{id:"iframe_cont"}},[s("textarea",{staticStyle:{transform:"'translateY(-300vh)'"},attrs:{readonly:"",id:"textarea"}}),s("video",{attrs:{height:"100%",width:"100%",id:"video",src:e.url+"/bufferVideo/"+e.src,frameborder:"3",allow:"autoplay;",allowfullscreen:"",controls:""}})])},g=[],b=s("56d7"),_={props:["src","userData","lessonId"],mounted:function(){var e=this;this.mobile=u["a"].isNative,this.setTimeOut=setTimeout((function(){r.a.post("/addVideoView",{userId:e.$store.getters.userId,lessonId:e.lessonId}).then((function(e){}))}),12e4)},data:function(){return{playing:!1,mobile:!1,setTimeOut:null,url:Object(b["url"])()}},computed:{watermark:function(){return this.$store.getters.adminData.watermark}},methods:{handleSpeed:function(e){console.log(e.target.value);var t=document.getElementById("video");t.playbackRate=+e.target.value,setTimeout((function(){return t.play()}),500)}},destroyed:function(){clearTimeout(this.setTimeOut)}},w=_,y=(s("cb46"),Object(v["a"])(w,h,g,!1,null,"f743ac2a",null)),x=y.exports,k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.lesson?s("div",{staticClass:"lesson-content"},[s("div",[s("div",{staticClass:"vid-info directed"},[s("h3",[e._v(" "+e._s(e._f("section")(e.lesson.section,e.lesson.stage))+" ")]),s("h3",[e._v("درس رقم "+e._s(e.lesson.number))]),s("h3",[e._v(e._s(e.lesson.name))]),s("h3",[e._v(e._s(e._f("stage")(e.lesson.stage)))])]),s("hr"),s("div",{staticClass:"start-video",on:{click:e.startVideo}},[s("h5",[e._v("تشغيل الفيديو")])]),e.videoStarted?s("div",{staticClass:"video fullscreen"},[s("div",{staticClass:"toggle",on:{click:function(){return e.videoStarted=!1}}},[s("i",{staticClass:"fa fa-times"})]),s("div",{staticClass:"bg-dark",staticStyle:{width:"100%",height:"100%"}},["youtube-embed"==e.videoType&&e.videoStarted?s("video-iframe",{attrs:{src:e.lesson.videoPath,lessonId:e.lesson._id}}):e._e(),"storage-stream"==e.videoType&&e.videoStarted?s("video-stream",{attrs:{src:e.lesson.videoPath,lessonId:e.lesson._id}}):e._e(),"youtube-stream"==e.videoType&&e.videoStarted?s("youtube-stream",{attrs:{src:e.lesson.videoPath,lessonId:e.lesson._id,password:e.vidPassword}}):e._e()],1),e.watermark?s("div",{staticClass:"watermark aligned"},[s("h4",[e._v(e._s(e.userData.fullname))]),s("h4",[e._v(e._s(e.userData.phone))])]):e._e()]):e._e(),s("hr"),s("div",{staticClass:"exp aligned"},[s("h3",[e._v("الشرح")]),s("hr"),s("br"),s("h5",[e._v(e._s(e.lesson.explain))])]),s("div",{staticClass:"row justify-content-center p-2"},[s("div",{staticClass:"col-md-4"},[s("button",{staticClass:"btn btn-secondary mx-auto",attrs:{type:"submit",disabled:!e.lesson.filePath.includes("http")},on:{click:function(){return e.downloadFile(e.lesson._id)}}},[e._v(" تحميل ملف الشرح ")]),s("a",{ref:"file",staticStyle:{display:"none"},attrs:{target:"_blank",download:""}},[e._v("download")])])])]),s("hr"),s("br"),s("div",{staticClass:"row justify-content-center p-2"},[s("div",{staticClass:"col-md-4"},[s("button",{staticClass:"btn btn-primary",attrs:{disabled:!e.userTask},on:{click:function(){e.$router.push("/videos/"+e.$route.params.unit+"/answerTaskUser/"+e.lesson._id).catch((function(){}))}}},[e._v(" "+e._s(e.userTaskSolution?"أعادة حل الواجب":"قم بحل الواجب")+" ")])]),s("div",{staticClass:"col-md-4"},[s("button",{staticClass:"btn btn-success",attrs:{disabled:!e.userTaskSolution},on:{click:function(){e.$router.push("/videos/"+e.$route.params.unit+"/userTaskSolution/"+e.$store.getters.userId+"/"+e.lesson._id).catch((function(){}))}}},[e._v(" تصحيح الواجب ")])])]),s("hr"),s("br")]):e._e()])},C=[],S=(s("caad"),s("2532"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-dark",staticStyle:{width:"100%",height:"100%"}},[e.encoded?s("video",{attrs:{height:"100%",width:"100%",id:"video",frameborder:"3",allow:"autoplay;",allowfullscreen:"",controls:"",controlsList:"nodownload",crossorigin:"anonymous",src:e.encoded,preload:"1"},on:{progress:e.progress}}):e._e()])}),T=[],$={props:["src","userData","lessonId","password"],created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s="".concat(b["url"],"/streamYoutube/").concat(encodeURIComponent(e.src),"\n    /").concat(e.$store.getters.token,"/").concat(e.password),e.encoded=s;case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{url:null,encoded:null,chunk:0}},methods:{progress:function(e){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()}}},I=$,O=Object(v["a"])(I,S,T,!1,null,null,null),E=O.exports,V=(u["b"].Filesystem,{props:["lesson","userData"],components:{VideoIframe:f,VideoStream:x,YoutubeStream:E},created:function(){this.mobile=u["a"].isNative,this.getUserTaskAndSolution()},data:function(){return{pdf:null,mobile:!1,loading:!1,videoStarted:!1,userTask:null,userTaskSolution:null,vidPassword:null}},computed:{videoType:function(){var e=this.lesson.videoPath;return e.includes("http")?e.includes("embed")&&e.includes("youtube")?"youtube-embed":!e.includes("embed")&&e.includes("youtube")?"youtube-stream":void 0:"storage-stream"},watermark:function(){return this.$store.getters.adminData.watermark}},watch:{lesson:function(){},videoStarted:function(e){this.$emit("videoStarted",e)}},methods:{downloadFile:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:s=Object(b["url"])()+"/downloadFile/"+e,u["a"].isNative&&!u["a"].isNative||window.open(s,"_blank");case 2:case"end":return t.stop()}}),t)})))()},getUserTaskAndSolution:function(){var e=this;this.userTaskSolution=null,this.userTask=null,r.a.post("/getUserTaskAndSolution",{userId:localStorage.getItem("userId"),lessonId:this.lesson._id}).then((function(t){e.userTask=t.data.task,e.userTaskSolution=t.data.solution}))},startVideo:function(){var e=this;"youtube-stream"==this.videoType?r.a.get("/authorizeVideo/"+this.$route.params.unit).then((function(t){if(t.data.err)return e.$store.dispatch("writemessage",t.data.err);e.vidPassword=t.data.password,e.videoStarted=!0})):this.videoStarted=!0}}}),R=V,D=(s("b269"),Object(v["a"])(R,k,C,!1,null,"9e414150",null)),j=D.exports,L=s("44c7"),P=s("f6f8"),N=s("9f21"),M={components:{VideoIframe:f,VideoStream:x,Lesson:j,Exam:L["default"],Solution:P["a"]},mounted:function(){},created:function(){var e=this;this.unit=+this.$route.params.unit;var t=this.$route.params.stage;this.loading1=!0,t?r.a.get("/fetchVideosForVisitors/"+t+"/"+this.unit).then((function(t){e.loading1=!1,e.lessons=t.data.videos})):(this.getLessonsForStudent(),this.getExams())},data:function(){return{lessons:[],exams:[],number:null,exam_number:null,userData:{},open:!0,loading1:!1,loading2:!1,videoStarted:!1,unit:null,lesson:null,exam:null,solutionModel:null,solution:null,examLoading:!1}},computed:{adminData:function(){return this.$store.getters.adminData}},watch:{$route:function(e,t){this.$route.params.lessonId||this.$route.params.userId?this.lesson=null:(this.number=null,this.exam_number=null)}},methods:{startLesson:function(e,t){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s.$router.push("/videos/"+s.$route.params.unit),s.number=t,s.exam_number=-1,s.lesson=null,s.solution=null,setTimeout((function(){s.lesson=e,s.exam=null,s.open=!1}),200);case 6:case"end":return a.stop()}}),a)})))()},startExam:function(e,t){var s=this;this.$router.push("/videos/"+this.$route.params.unit),this.lesson=null,this.exam=null,this.solutionModel=null,this.solution=null,this.open=!1,this.exam_number=t,this.number=-1,this.examLoading=!0,r.a.get("/fetchUnitExamForUser/".concat(e,"/").concat(this.$store.getters.userId,"/").concat(this.unit)).then((function(e){if(s.examLoading=!1,e.data.err)return s.$store.dispatch("writemessage",e.data.err);e.data.isExam?(s.exam=e.data.exam,s.solutionModel={sections:Object(N["a"])(s.exam)}):e.data.isSolution&&(s.solution=e.data.solution)}))},toggle:function(){this.open=!this.open},getLessonsForStudent:function(){var e=this;r.a.post("/getUserData",{_id:localStorage.getItem("userId")}).then((function(t){e.userData=t.data.userdata})),r.a.get("/fetchVideosForStudent/"+localStorage.getItem("userId")+"/"+localStorage.getItem("stage")+"/"+this.unit).then((function(t){if(e.loading1=!1,t.data.err)return e.$store.dispatch("writemessage",t.data.err);e.lessons=t.data.videos}))},getExams:function(){var e=this,t=this.$route.params.unit,s=this.$store.getters.stage;this.loading2=!0,r.a.get("/fetchUnitExamsForUser/".concat(s,"/").concat(t)).then((function(t){e.loading2=!1,e.exams=t.data.exams}))},openLesson:function(e,t){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e.locked){a.next=2;break}return a.abrupt("return");case 2:if(e.coded){a.next=6;break}s.startLesson(e,t),a.next=19;break;case 6:if(n=prompt("قم بأدخال الكود الخاص بالدرس","******"),""==n){a.next=19;break}return a.next=10,r.a.get("/getLessonByCode/".concat(e._id,"/").concat(s.$store.getters.userId,"/").concat(n));case 10:if(o=a.sent,!o.data.err){a.next=17;break}if("code"!=o.data.err){a.next=16;break}return a.abrupt("return",alert("الكود غير صحيح"));case 16:return a.abrupt("return",o.data.err);case 17:e=o.data.lesson,s.startLesson(e,t);case 19:case"end":return a.stop()}}),a)})))()}}},F=M,U=(s("05f2"),Object(v["a"])(F,a,n,!1,null,"28f50eac",null));t["default"]=U.exports},9162:function(e,t,s){"use strict";s("2194")},9697:function(e,t,s){},b269:function(e,t,s){"use strict";s("d338")},b534:function(e,t,s){},c2b0:function(e,t,s){e.exports=s.p+"img/lock.1769949a.png"},cb46:function(e,t,s){"use strict";s("b534")},d338:function(e,t,s){}}]);
//# sourceMappingURL=chunk-64fa72dc.3df11243.js.map