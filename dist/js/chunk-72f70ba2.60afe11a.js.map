{"version":3,"sources":["webpack:///./src/views/tasks/admin/addTask.vue?d054","webpack:///./src/views/tasks/admin/addTask.vue?9ed1","webpack:///src/views/tasks/admin/addTask.vue","webpack:///./src/views/tasks/admin/addTask.vue?13c8","webpack:///./src/views/tasks/admin/addTask.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","action","_v","_e","_s","exam","name","directives","rawName","value","expression","modifiers","attrs","domProps","on","$event","target","composing","numberOfQuestionsSections","_n","$forceUpdate","_l","section","i","key","concatArraysOfQuestionsHandler","addExam","gotoSolutionModel","questionsExist","copyQuestions","questionsStorageExist","pasteQuestions","download","ref","staticStyle","getJson","upload","removeQuestions","staticRenderFns","created","lessonId","$route","params","res","data","setTimeout","mounted","intervalSave","setInterval","destroyed","clearInterval","components","QuestionsSection","Loading","Datetime","year","stage","sections","loading","removing","allQuestions","taskExist","taskId","file","internalSave","uploadAPI","computed","watch","num","slice","methods","questions","saveProgress","localStorage","setItem","JSON","stringify","$router","push","validate","forEach","sec","type","errors","ques","question","fullDegree","choices","length","opt","alert","error","console","log","$store","dispatch","a","href","url","click","window","URL","revokeObjectURL","split","fileReader","readAsText","blob","addEventListener","$refs","confirm","removeItem","component"],"mappings":"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","file":"js/chunk-72f70ba2.60afe11a.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addTask.vue?vue&type=style&index=0&id=3de94ca3&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cont\"},[_c('div',{staticClass:\"header\"},[(_vm.action === 'addExam')?_c('h2',{staticClass:\"text-center\"},[_vm._v(\"أضافة واجب\")]):_vm._e(),(_vm.action === 'editExam')?_c('h2',{staticClass:\"text-center\"},[_vm._v(\"تعديل الواجب\")]):_vm._e(),(_vm.action === 'editExam')?_c('h5',{staticClass:\"text-center\"},[_vm._v(_vm._s(_vm.exam.name))]):_vm._e(),_c('hr')]),_c('div',{staticClass:\"settings\"},[_c('div',{staticClass:\"row justify-content-center\"},[_c('div',{staticClass:\"nos col-md-4\"},[_c('div',{staticClass:\"examinfo\"},[_c('label',[_vm._v(\"عدد الاسئلة الرئيسية\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.numberOfQuestionsSections),expression:\"numberOfQuestionsSections\",modifiers:{\"number\":true}}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"min\":\"1\",\"max\":\"10\"},domProps:{\"value\":(_vm.numberOfQuestionsSections)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.numberOfQuestionsSections=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])])])]),_c('div',{staticClass:\"questions\"},[_c('div',{staticClass:\"questionsSection\"},_vm._l((_vm.exam.sections),function(section,i){return _c('questions-section',{key:i,attrs:{\"section\":section,\"index\":i},on:{\"concatArraysOfQuestions\":_vm.concatArraysOfQuestionsHandler}})}),1)]),(_vm.loading)?_c('loading'):_vm._e(),(_vm.removing)?_c('loading'):_vm._e(),_c('div',{staticClass:\"row justify-content-center align-items-center\"},[_c('div',{staticClass:\"actions col-md-4\"},[_c('button',{staticClass:\"btn\",on:{\"click\":_vm.addExam}},[_vm._v(\"اضافة الامتحان\")])]),(_vm.taskExist)?_c('div',{staticClass:\"col-md-4\"},[_c('button',{staticClass:\"btn btn-success\",on:{\"click\":_vm.gotoSolutionModel}},[_vm._v(\" اضافة نموذج اجابة \")])]):_vm._e(),_c('div',{staticClass:\"col-md-4\"},[_c('button',{staticClass:\"_btn btn-1\",attrs:{\"disabled\":!_vm.questionsExist},on:{\"click\":_vm.copyQuestions}},[_vm._v(\" Copy \")])]),_c('div',{staticClass:\"col-md-4\"},[_c('button',{staticClass:\"_btn btn-2\",attrs:{\"disabled\":!_vm.questionsStorageExist},on:{\"click\":_vm.pasteQuestions}},[_vm._v(\" Paste \")])]),_c('div',{staticClass:\"col-md-4\"},[_c('button',{staticClass:\"_btn btn-3\",attrs:{\"disabled\":!_vm.questionsExist},on:{\"click\":_vm.download}},[_vm._v(\" Download \")])]),_c('div',{staticClass:\"col-md-4\"},[_c('input',{ref:\"upload\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\"},on:{\"change\":_vm.getJson}}),_c('button',{staticClass:\"_btn btn-4\",on:{\"click\":_vm.upload}},[_vm._v(\"Upload\")])]),_c('div',{staticClass:\"col-md-4\"},[_c('button',{staticClass:\"_btn btn-danger\",on:{\"click\":_vm.removeQuestions}},[_vm._v(\"Remove\")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"cont\">\n    <div class=\"header\">\n      <h2 v-if=\"action === 'addExam'\" class=\"text-center\">أضافة واجب</h2>\n      <h2 v-if=\"action === 'editExam'\" class=\"text-center\">تعديل الواجب</h2>\n      <h5 class=\"text-center\" v-if=\"action === 'editExam'\">{{ exam.name }}</h5>\n      <hr />\n    </div>\n    <div class=\"settings\">\n      <div class=\"row justify-content-center\">\n        <div class=\"nos col-md-4\">\n          <div class=\"examinfo\">\n            <label>عدد الاسئلة الرئيسية</label>\n            <input\n              class=\"form-control\"\n              type=\"number\"\n              min=\"1\"\n              max=\"10\"\n              v-model.number=\"numberOfQuestionsSections\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"questions\">\n      <div class=\"questionsSection\">\n        <questions-section\n          :section=\"section\"\n          :index=\"i\"\n          @concatArraysOfQuestions=\"concatArraysOfQuestionsHandler\"\n          v-for=\"(section, i) in exam.sections\"\n          :key=\"i\"\n        />\n      </div>\n    </div>\n    <loading v-if=\"loading\" />\n    <loading v-if=\"removing\" />\n    <div class=\"row justify-content-center align-items-center\">\n      <div class=\"actions col-md-4\">\n        <button class=\"btn\" @click=\"addExam\">اضافة الامتحان</button>\n      </div>\n      <div v-if=\"taskExist\" class=\"col-md-4\">\n        <button class=\"btn btn-success\" @click=\"gotoSolutionModel\">\n          اضافة نموذج اجابة\n        </button>\n      </div>\n      <div class=\"col-md-4\">\n        <button :disabled=\"!questionsExist\" @click=\"copyQuestions\" class=\"_btn btn-1\">\n          Copy\n        </button>\n      </div>\n      <div class=\"col-md-4\">\n        <button\n          :disabled=\"!questionsStorageExist\"\n          @click=\"pasteQuestions\"\n          class=\"_btn btn-2\"\n        >\n          Paste\n        </button>\n      </div>\n      <div class=\"col-md-4\">\n        <button :disabled=\"!questionsExist\" @click=\"download\" class=\"_btn btn-3\">\n          Download\n        </button>\n      </div>\n      <div class=\"col-md-4\">\n        <input style=\"display: none\" type=\"file\" ref=\"upload\" @change=\"getJson\" />\n        <button @click=\"upload\" class=\"_btn btn-4\">Upload</button>\n      </div>\n      <div class=\"col-md-4\">\n        <button @click=\"removeQuestions\" class=\"_btn btn-danger\">Remove</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport QuestionsSection from \"../../../components/admin/QuestionsSection.vue\";\nimport Loading from \"../../../components/loading.vue\";\nimport { eventBus } from \"../../../main.js\";\nimport { Datetime } from \"vue-datetime\";\nexport default {\n  created() {\n    this.exam.lessonId = this.$route.params.lessonId;\n    //////////////////////////////////////////////////////////\n    axios.get(`/fetchTaskByLessonId/${this.exam.lessonId}`).then((res) => {\n      if (!res.data.exam) {\n        this.action = \"addExam\";\n        setTimeout(() => {\n          this.numberOfQuestionsSections = 1;\n        }, 200);\n        return;\n      }\n      this.action = \"editExam\";\n      this.exam = res.data.exam;\n      this.taskId = this.exam._id;\n      this.numberOfQuestionsSections = res.data.exam.sections.length;\n      this.taskExist = true;\n    });\n  },\n  mounted() {\n    this.intervalSave = setInterval(() => this.saveProgress(), 3000);\n  },\n  destroyed() {\n    if (!this.intervalSave) return;\n    clearInterval(this.intervalSave);\n  },\n  components: {\n    QuestionsSection,\n    Loading,\n    Datetime,\n  },\n  data() {\n    return {\n      exam: {\n        year: 2022,\n        stage: \"6\",\n        sections: [],\n        lessonId: null,\n      },\n      loading: false,\n      removing: false,\n      numberOfQuestionsSections: 0,\n      allQuestions: [],\n      /////////////////////\n      taskExist: false,\n      taskId: null,\n      ////////////////////\n      file: null,\n      internalSave: null,\n      uploadAPI: \"/uploadQuestions\",\n      action: \"addExam\",\n    };\n  },\n  computed: {\n    questionsExist() {\n      // return localStorage.getItem(\"exam\");\n      return true;\n    },\n    questionsStorageExist() {\n      // return localStorage.getItem(\"questions\");\n      return true;\n    },\n  },\n  watch: {\n    numberOfQuestionsSections(val) {\n      let num = 0;\n      const exam = { ...this.exam };\n      for (let i = 0; i < val; i++) {\n        this.exam.sections[i] = exam.sections[i] || {};\n        num++;\n      }\n      this.exam.sections = this.exam.sections.slice(0, num);\n    },\n  },\n  methods: {\n    concatArraysOfQuestionsHandler(questions, i) {\n      this.allQuestions[i] = questions;\n    },\n    saveProgress() {\n      eventBus.$emit(\"save\");\n      const exam = { ...this.exam, sections: this.allQuestions };\n      localStorage.setItem(\"exam\", JSON.stringify(exam));\n    },\n    async addExam() {\n      this.allQuestions = [];\n      eventBus.$emit(\"collectQuestions\");\n      console.log(this.validate());\n      if (!this.validate()) return;\n      const exam = await this.createExamFormData();\n      this.loading = true;\n      axios.post(this.uploadAPI, exam).then((res) => {\n        this.allQuestions = [];\n        this.loading = false;\n        if (res.data.err) {\n          this.taskExist = false;\n          this.$store.dispatch(\"writemessage\", res.data.err);\n          return;\n        }\n        this.taskExist = true;\n        if (res.data.id) this.taskId = res.data.id;\n        this.$store.dispatch(\"writemessage\", \"تم رفع الواجب بنجاح\");\n        localStorage.removeItem(\"exam\");\n      });\n    },\n    async createExamFormData() {\n      const formData = new FormData();\n      const exam = { ...this.exam, isTask: true };\n      delete exam[\"sections\"];\n      delete exam[\"fullDegree\"];\n      for (let prop in exam) {\n        formData.append(prop, exam[prop]);\n      }\n      let fullDegree = 0;\n      const sections = [];\n      for (let section of this.allQuestions) {\n        sections.push(section);\n        if (section.type.includes(\"blob:\")) {\n          const name = `address-${section.number}`;\n          const url = await fetch(section.type);\n          const blob = await url.blob();\n          const file = new File([blob], `${name}.${section.mimetype.split(\"/\")[1]}`, {\n            type: section.mimetype,\n          });\n          formData.append(\"image\", file, name);\n        }\n        for (let ques of section.questions) {\n          //////////////////////////\n          fullDegree += ques.fullDegree;\n          //////////////////////////\n          if (ques.question.includes(\"blob:\")) {\n            const name = `question-${section.number}-${ques.number}`;\n            const url = await fetch(ques.question);\n            const blob = await url.blob();\n            const file = new File([blob], `${name}.${ques.mimetype.split(\"/\")[1]}`, {\n              type: ques.mimetype,\n            });\n            formData.append(\"image\", file, name);\n          }\n        }\n      }\n      formData.append(\"fullDegree\", fullDegree);\n      formData.append(\"sections\", JSON.stringify(sections));\n\n      return formData;\n    },\n    gotoSolutionModel() {\n      this.$router.push(\"/dashboard/answerTaskAdmin/\" + this.exam.lessonId);\n    },\n    validate() {\n      const errors = [];\n      ///////////////////////////////////////////////////////////////\n      this.allQuestions.forEach((sec) => {\n        if (sec.type == \"\") errors.push(`عنوان القسم رقم ${sec.number + 1} غير موجود`);\n        sec.questions.forEach((ques, i) => {\n          if (ques.question == \"\")\n            errors.push(`السؤال رقم ${i + 1} في القسم رقم ${sec.number + 1} غير موجود`);\n          if (ques.fullDegree == \"\")\n            errors.push(\n              `درجة السؤال رقم ${i + 1} في القسم رقم ${sec.number + 1} غير موجودة`\n            );\n          if (ques.choices.length < 2)\n            errors.push(\n              `عدد الأختيارات في السؤال رقم ${i + 1} القسم رقم  ${\n                sec.number + 1\n              } أقل من أختيارين`\n            );\n          ques.choices.forEach((opt, c) => {\n            if (opt == \"\")\n              errors.push(\n                `الاختيار رقم ${c + 1} في السؤال رقم ${i + 1} في القسم رقم ${\n                  sec.number + 1\n                } غير موجود`\n              );\n          });\n        });\n      });\n      if (errors.length > 0) {\n        errors.forEach((error) => {\n          alert(error);\n        });\n        return false;\n      }\n      console.log(errors);\n      return true;\n    },\n    copyQuestions() {\n      eventBus.$emit(\"collectQuestions\");\n      localStorage.setItem(\"questions\", JSON.stringify(this.allQuestions));\n      this.$store.dispatch(\"writemessage\", \"تم نسخ الأمتحان\");\n    },\n    pasteQuestions() {\n      const sections = JSON.parse(localStorage.getItem(\"questions\"));\n      if (sections) {\n        this.exam = { ...this.exam, sections };\n        this.numberOfQuestionsSections = sections.length;\n      }\n    },\n    download() {\n      eventBus.$emit(\"collectQuestions\");\n      const json = JSON.stringify(this.allQuestions);\n      const blob = new Blob([json], { type: \"octet/stream\" });\n      const url = window.URL.createObjectURL(blob);\n      // const url =\n      //   \"data:text/json;charset=utf-8,\" +\n      //   encodeURIComponent(JSON.stringify(this.allQuestions));\n      const a = document.createElement(\"a\");\n      a.download = this.exam.name + \".json\";\n      a.href = url;\n      a.click();\n      window.URL.revokeObjectURL(url);\n    },\n    getJson(e) {\n      const file = e.target.files[0];\n      if (file.type.split(\"/\")[1] != \"json\") return alert(\"ملفات json فقط مسمحوحة\");\n      this.file = file;\n      const blob = new Blob([file], { type: \"octet/stream\" });\n      const fileReader = new FileReader();\n      fileReader.readAsText(blob);\n      fileReader.addEventListener(\"loadend\", (e) => {\n        const sections = JSON.parse(e.srcElement.result);\n        if (sections) {\n          this.exam = { ...this.exam, sections };\n          this.numberOfQuestionsSections = sections.length;\n        }\n      });\n    },\n    upload() {\n      this.$refs.upload.click();\n    },\n    removeQuestions() {\n      if (!confirm(\"تأكيد مسح الأسئلة\")) return;\n      this.exam.sections = [];\n      this.numberOfQuestionsSections = 0;\n      setTimeout(() => (this.numberOfQuestionsSections = 1), 400);\n      localStorage.removeItem(\"exam\");\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../../../../node_modules/vue-datetime/dist/vue-datetime.css\";\n\n.cont {\n  padding: 20px;\n  @media (max-width: 600px) {\n    padding: 12px;\n  }\n}\n\n.settings {\n  padding: 25px;\n  border-bottom: 3px solid rgba(141, 139, 139, 0.878);\n  @media (max-width: 600px) {\n    padding: 3px;\n    padding-bottom: 20px;\n  }\n}\n\n.examinfo {\n  text-align: right;\n  label {\n    margin-bottom: 1px;\n  }\n}\n\n.form-text {\n  position: relative;\n  span {\n    position: absolute;\n    top: 30px;\n    right: 12px;\n    color: rgba(85, 85, 85, 0.81);\n    font-weight: 800;\n  }\n}\n\n.actions {\n  width: 100%;\n  padding: 12px;\n  button {\n    color: #fff;\n    padding: 10px 20px;\n    background: linear-gradient(#8360c3, #2ea4bf);\n    width: 100%;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addTask.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./addTask.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./addTask.vue?vue&type=template&id=3de94ca3&scoped=true&\"\nimport script from \"./addTask.vue?vue&type=script&lang=js&\"\nexport * from \"./addTask.vue?vue&type=script&lang=js&\"\nimport style0 from \"./addTask.vue?vue&type=style&index=0&id=3de94ca3&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3de94ca3\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}